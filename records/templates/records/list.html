{% extends 'common/base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'records/css/records.css' %}">
{% endblock %}

{% block title %}Results{% endblock %}

{% block body_attrs %}style="--navbar-bg: url('{% static "common/images/results-background.jpg" %}'); --navbar-bg-pos: 50% 50%;"{% endblock %}

{% block navbar_title %}Results{% endblock %}

{% block content %}

{% if results %}
    <div class="wrapper-results">
        <form class="results" method="get">
            <h2>Results</h2>
            <div class="choose-year-wrapper">
                <label class="choose-year-label-el">Choose year:</label>
                <select name="year" class="year-select" onchange="this.form.submit()">
                    <option value="">All</option>
                    {% for y in years %}
                    <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>
                        {{ y }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="table-wrapper">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Athlete</th>
                            <th>Competition</th>
                            <th>Discipline</th>
                            <th>Position</th>
                            <th>Result</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for r in results %}
                        <tr>
                            <td>{{ r.athlete.first_name }} {{ r.athlete.last_name }}</td>
                            <td>{{ r.competition.name }}</td>
                            <td>{{ r.discipline.name }}</td>
                            <td>{{ r.position }}</td>
                            <td>{{ r.result_value }}{{ r.unit }}</td>
                            <td>{{ r.result_date|date:"d M Y" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </form>
    </div>
{% else %}
    <div class="no-results-found">
        <h2>No results available at this time, please try again later.</h2>
        <p>Report this problem to: +359ХХХХХХХ</p>
    </div>
{% endif %}

{% endblock %}