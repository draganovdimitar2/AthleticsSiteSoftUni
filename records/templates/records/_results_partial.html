{% load static %}
{% if results %}
    <form class="results" method="get">
        <h2>Results</h2>
        <div class="choose-year-wrapper">
            <label class="choose-year-label-el">Choose year:</label>
            <select name="year" class="year-select">
                <option value="">All</option>
                {% for y in years %}
                <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>
                    {{ y }}
                </option>
                {% endfor %}
            </select>
        </div>
        <div class="choose-competition-wrapper">
            <label class="choose-competition-label-el">Choose competition:</label>
            <input type="text" name="competition_name" class="competition-select" id="competition-name-input" value="{{ selected_competition_name|default_if_none:'' }}">
        </div>
        <div class="table-wrapper">
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Athlete</th>
                        <th>Competition</th>
                        <th>Discipline</th>
                        <th>Position</th>
                        <th>Result</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in results %}
                    <tr>
                        <td>{{ r.athlete.first_name }} {{ r.athlete.last_name }}</td>
                        <td>{{ r.competition.name }}</td>
                        <td>{{ r.discipline.name }}</td>
                        <td>{{ r.position }}</td>
                        <td>{{ r.result_value }}{{ r.unit }}</td>
                        <td>{{ r.result_date|date:"d M Y" }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </form>
{% else %}
    <div class="no-results-found">
        <h2>No results available at this time, please try again later.</h2>
        <p>Report this problem to: +359ХХХХХХХ</p>
    </div>
{% endif %}